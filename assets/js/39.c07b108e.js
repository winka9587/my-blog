(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{583:function(t,e,s){"use strict";s.r(e);var r=s(56),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ros-day2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ros-day2"}},[t._v("#")]),t._v(" ROS Day2")]),t._v(" "),s("h2",{attrs:{id:"ros-topic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ros-topic"}},[t._v("#")]),t._v(" ROS Topic")]),t._v(" "),s("p",[t._v("可以通过双击tab来检查可执行的命令\n如输入rostopic后双击tab，会列出可执行的子命令")]),t._v(" "),s("p",[t._v("到rqt_plot章节\n运行命令rosrun rqt_plot rqt_plot报和rqt_graph相同的错误，Segmentation fault(core dumped)\n应该是Qt的问题。\n与rqt_graph相同的解决方案，直接运行命令rqt_plot 即可")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("通过命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("rostopic echo [topic]\n")])])]),s("p",[t._v("来监听节点上关于话题[topic]的指令")]),t._v(" "),s("p",[t._v("通过命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("rostopic list -v\n")])])]),s("p",[t._v("其中v代表verbose（唠叨）\n能够打印所有的话题（Published）以及被订阅的话题（Subscribed）")]),t._v(" "),s("p",[t._v("话题的通讯是通过节点之间发送ROS消息实现的。\n例如控制?移动的例子，turtle_teleop_key通过键盘控制就是话题的发布者，turtlulesim_node（图形界面）就是话题的订阅者。\n发布者和订阅者必须发送和接受相同类型（type）的消息，通过rostopic type [topic]可以查看发布在话题上的消息类型。\n还可以通过pub子命令来发布消息。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("rostopic pub [话题名称] [消息类型] -- [参数]\n")])])]),s("p",[t._v("例如")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("rostopic pub /turtle1/cmd_vel geometry_msgs/Twist -- '[2,0,0]' '[0,0,1.8]'\n")])])]),s("p",[t._v("就与turtle_teleop_key控制乌龟一样了")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("rostopic hz [topic]\n")])])]),s("p",[t._v("可以查看数据发布速度")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ros-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ros-service"}},[t._v("#")]),t._v(" ROS Service")]),t._v(" "),s("h2",{attrs:{id:"rosservice-list-可以列出所有可用的服务可以通过rosservice-type-service-来查看某个服务的类型-想要获得具体的信息可以添加字段rosservice-type-service-rossrv-show例如服务-spawnrosservice-type-spawn-rossrv-showfloat32-xfloat32-yfloat32-thetastring-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rosservice-list-可以列出所有可用的服务可以通过rosservice-type-service-来查看某个服务的类型-想要获得具体的信息可以添加字段rosservice-type-service-rossrv-show例如服务-spawnrosservice-type-spawn-rossrv-showfloat32-xfloat32-yfloat32-thetastring-name"}},[t._v("#")]),t._v(" rosservice list 可以列出所有可用的服务\n可以通过rosservice type [service]\n来查看某个服务的类型，想要获得具体的信息可以添加字段\nrosservice type [service] | rossrv show\n例如服务/spawn\nrosservice type /spawn | rossrv show\nfloat32 x\nfloat32 y\nfloat32 theta\nstring name")]),t._v(" "),s("h2",{attrs:{id:"string-name意思是有x-y-theta-name四个参数-其中name可省略而服务-clear只输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#string-name意思是有x-y-theta-name四个参数-其中name可省略而服务-clear只输出"}},[t._v("#")]),t._v(" string name\n意思是有x,y,theta,name四个参数，其中name可省略\n而服务/clear只输出")]),t._v(" "),s("p",[t._v("意思是无需参数，其类型为std_srvs/Empty")]),t._v(" "),s("p",[t._v("可以通过\nrosservice call [service] [args]\n来调用服务")]),t._v(" "),s("p",[t._v("服务类似于话题，也是节点的通信方式")]),t._v(" "),s("p",[t._v("例如乌龟例子就有/clear,/reset等服务\nrosservice call /clear 就能清空已绘制的画面。")]),t._v(" "),s("p",[t._v("通过rosparam get / 来获得所有的参数值\n也可以通过rosparam dump xxx.yaml来存储所有参数\n读取通过rosparam load xxx.yaml copyturtle\n其中copyturtle为一个新的namespace")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("roslaunch用来启动定义在launch文件中的节点\n如果理解？每个包（package）都有一个launch目录（并不一定命名为launch，但通常都这么做），roslaunch会自动查找包中的可启动文件")]),t._v(" "),s("p",[t._v("roslaunch [package] [filename.launch]\n例如beginner_tutorial")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v(" cd ~/catkin_ws\n source devel/setup.bash\n roscd beginner_tutorials\n")])])]),s("p",[t._v("创建launch目录")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v(" mkdir launch\n cd launch\n")])])]),s("p",[t._v("在目录下创建tutlemimic.launch文件\n并写入下面的内容")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('<launch> \n      <group ns="turtlesim1">\n          <node pkg="turtlesim" name="sim" type="turtlesim_node">\n      </group>\n      <group ns="turtlesim1">\n          <node pkg="turtlesim" name="sim" type="turtlesim_node">\n      </group>\n\n      <node pkg="turtlesim" name="mimic" type="mimic">\n          <remap from="input" to="turtlesim1/turtle1"/>\n          <remap from="output" to="turtlesim2/turtle1"/>\n      </node>\n </launch>\n')])])]),s("hr"),t._v(" "),s("p",[t._v("使用roslaunch beginner_tutorials turtlemimic.launch\n会启动launch文件中的三个节点")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("turtlesim1/sim\nturtlesim2/sim\nmimic\n")])])]),s("p",[t._v("mimic节点会将turtlesim1/turtle1的所有信息发送给turtlesim2/turtle1")]),t._v(" "),s("img",{attrs:{src:"https://raw.githubusercontent.com/winka9587/MD_imgs/main/Norproject/2022-08-24-Tt0tEa.png",width:"50%"}})])}),[],!1,null,null,null);e.default=a.exports}}]);