<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[踩坑记录]ARCore for Unity2019 | winka9587&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Is anyone there?">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.66c04e2d.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.8719d32f.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.fe61bd6b.js" as="script"><link rel="preload" href="/my-blog/assets/js/3.82c0e95c.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.96b7d755.js"><link rel="prefetch" href="/my-blog/assets/js/11.94221570.js"><link rel="prefetch" href="/my-blog/assets/js/12.cda01586.js"><link rel="prefetch" href="/my-blog/assets/js/13.be30332a.js"><link rel="prefetch" href="/my-blog/assets/js/14.3776679c.js"><link rel="prefetch" href="/my-blog/assets/js/15.1be49f13.js"><link rel="prefetch" href="/my-blog/assets/js/16.f19ac87a.js"><link rel="prefetch" href="/my-blog/assets/js/17.def0ab1f.js"><link rel="prefetch" href="/my-blog/assets/js/18.708e7573.js"><link rel="prefetch" href="/my-blog/assets/js/19.66596390.js"><link rel="prefetch" href="/my-blog/assets/js/20.3995b6ee.js"><link rel="prefetch" href="/my-blog/assets/js/21.1c7f65f7.js"><link rel="prefetch" href="/my-blog/assets/js/22.6664bb7c.js"><link rel="prefetch" href="/my-blog/assets/js/23.43617db7.js"><link rel="prefetch" href="/my-blog/assets/js/24.67d6fbed.js"><link rel="prefetch" href="/my-blog/assets/js/25.41d7c9b1.js"><link rel="prefetch" href="/my-blog/assets/js/26.f2a09d11.js"><link rel="prefetch" href="/my-blog/assets/js/27.0a80dbf8.js"><link rel="prefetch" href="/my-blog/assets/js/28.793261c3.js"><link rel="prefetch" href="/my-blog/assets/js/29.d7e6e503.js"><link rel="prefetch" href="/my-blog/assets/js/30.54d620af.js"><link rel="prefetch" href="/my-blog/assets/js/31.890c2d76.js"><link rel="prefetch" href="/my-blog/assets/js/32.78089df6.js"><link rel="prefetch" href="/my-blog/assets/js/33.df07fc4f.js"><link rel="prefetch" href="/my-blog/assets/js/34.faedcc52.js"><link rel="prefetch" href="/my-blog/assets/js/35.a6a32fa5.js"><link rel="prefetch" href="/my-blog/assets/js/36.b7734f20.js"><link rel="prefetch" href="/my-blog/assets/js/37.d2986868.js"><link rel="prefetch" href="/my-blog/assets/js/38.8df975a8.js"><link rel="prefetch" href="/my-blog/assets/js/39.c07b108e.js"><link rel="prefetch" href="/my-blog/assets/js/4.96218e05.js"><link rel="prefetch" href="/my-blog/assets/js/40.09555f17.js"><link rel="prefetch" href="/my-blog/assets/js/41.3d998535.js"><link rel="prefetch" href="/my-blog/assets/js/42.0e3c99bf.js"><link rel="prefetch" href="/my-blog/assets/js/43.315f3388.js"><link rel="prefetch" href="/my-blog/assets/js/5.9e62da6c.js"><link rel="prefetch" href="/my-blog/assets/js/6.3d281fcb.js"><link rel="prefetch" href="/my-blog/assets/js/7.cc12d867.js"><link rel="prefetch" href="/my-blog/assets/js/8.f68e3932.js"><link rel="prefetch" href="/my-blog/assets/js/9.4fb889cc.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.66c04e2d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">winka9587's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="winka的Blog" class="dropdown-title"><span class="title">winka的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="winka的Blog" class="mobile-dropdown-title"><span class="title">winka的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/winka9587" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vikanill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="winka的Blog" class="dropdown-title"><span class="title">winka的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="winka的Blog" class="mobile-dropdown-title"><span class="title">winka的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/winka9587" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vikanill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/my-blog/" class="sidebar-heading clickable router-link-active"><span>主页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/" aria-current="page" class="sidebar-link">README</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/Category-level/0001.html" class="sidebar-heading clickable"><span>类级别</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/Category-level/0001.html" class="sidebar-link">NOCS</a></li><li><a href="/my-blog/Category-level/0002.html" class="sidebar-link">SPD</a></li><li><a href="/my-blog/Category-level/0003.html" class="sidebar-link">关于normal</a></li><li><a href="/my-blog/Category-level/0004.html" class="sidebar-link">关于curvature</a></li><li><a href="/my-blog/Category-level/0005.html" class="sidebar-link">CAPTRA部分代码解读</a></li><li><a href="/my-blog/Category-level/0006.html" class="sidebar-link">about数据集</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/ComputerGraphics/" class="sidebar-heading clickable router-link-active open"><span>再见了,所有的图形学作业</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/ComputerGraphics/0002.html" class="sidebar-link">OpenGL使用Laplacian进行网格光顺</a></li><li><a href="/my-blog/ComputerGraphics/0003.html" class="sidebar-link">从Mat_中提取数据失败:Mat_与Mat的区别</a></li><li><a href="/my-blog/ComputerGraphics/0001.html" class="sidebar-link">[WebGL]点击改变面的贴图</a></li><li><a href="/my-blog/ComputerGraphics/0005.html" class="sidebar-link">OpenCV Error: Mat踩坑踩到死</a></li><li><a href="/my-blog/ComputerGraphics/0006.html" class="sidebar-link">Loop Subdivision与Modified Butterfly Subdivision</a></li><li><a href="/my-blog/ComputerGraphics/0007.html" class="sidebar-link">OpenGL通过glRasterPos设置当前光栅坐标实现分屏效果</a></li><li><a href="/my-blog/ComputerGraphics/0004.html" aria-current="page" class="active sidebar-link">[踩坑记录]ARCore for Unity2019</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#正常安装流程" class="sidebar-link">正常安装流程</a></li><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#中英文教程的不同" class="sidebar-link">中英文教程的不同</a></li><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#adb路径问题" class="sidebar-link">adb路径问题</a></li><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#android-tools-version-0-0-26-1-1" class="sidebar-link">Android Tools version 0.0 &lt; 26.1.1</a></li><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#gradle的问题" class="sidebar-link">Gradle的问题</a></li><li class="sidebar-sub-header"><a href="/my-blog/ComputerGraphics/0004.html#使用android-studio安装android-sdk" class="sidebar-link">使用Android Studio安装Android SDK</a></li></ul></li><li><a href="/my-blog/ComputerGraphics/0008.html" class="sidebar-link">[踩坑记录]VS2017+大恒MER-131-210U3C相机</a></li><li><a href="/my-blog/ComputerGraphics/0009.html" class="sidebar-link">[unity]C#脚本调用外部exe</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/Web/" class="sidebar-heading clickable"><span>Web</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/Web/0001.html" class="sidebar-link">解决'express' 不是内部或外部命令，也不是可运行的程序 或批处理文件</a></li><li><a href="/my-blog/Web/0002.html" class="sidebar-link">关于更新node.js以及npm</a></li><li><a href="/my-blog/Web/0003.html" class="sidebar-link">配置turn服务器实现nat穿透</a></li><li><a href="/my-blog/Web/0004.html" class="sidebar-link">web上的mediarecorder更换stream(录制过程中切换摄像头)</a></li><li><a href="/my-blog/Web/0005.html" class="sidebar-link">通过mediarecorder+mediasource实现h5直播,以及关于webrtc直播的问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/MachineLearning/" class="sidebar-heading clickable"><span>机器不学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/MachineLearning/0001.html" class="sidebar-link">基于SVM的划线框识别(1)HOG特征提取</a></li><li><a href="/my-blog/MachineLearning/0002.html" class="sidebar-link">基于SVM的划线框识别(2)ROC曲线(二分类)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/ROS/" class="sidebar-heading clickable"><span>ROS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/ROS/0001.html" class="sidebar-link">ROS Day1</a></li><li><a href="/my-blog/ROS/0002.html" class="sidebar-link">ROS Day2</a></li><li><a href="/my-blog/ROS/0003.html" class="sidebar-link">ROS Day3</a></li><li><a href="/my-blog/ROS/0004.html" class="sidebar-link">ROS Day4</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/my-blog/GoLearning/" class="sidebar-heading clickable"><span>天天想学习</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/my-blog/NoLearning/" class="sidebar-link">天天不想学习</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="踩坑记录-arcore-for-unity2019"><a href="#踩坑记录-arcore-for-unity2019" class="header-anchor">#</a> [踩坑记录]ARCore for Unity2019</h1> <p>只能说踩坑不可避免。</p> <h2 id="正常安装流程"><a href="#正常安装流程" class="header-anchor">#</a> 正常安装流程</h2> <p>如果只想了解Unity2019的ARCore配置流程直接看这里</p> <p><strong>1、官网下载并安装UnityHub</strong></p> <p><strong>2、在UnityHub安装Unity以及Android SDK、JDK、NDK等</strong></p> <p><strong>3、下载ARCore for Unity包并导入</strong></p> <p><strong>4、参考官网配置参数</strong></p> <p><strong>5、Build生成apk</strong></p> <p><strong>6、在手机上测试</strong></p> <p>这些在<a href="https://developers.google.cn/ar/develop/unity/quickstart-android" target="_blank" rel="noopener noreferrer">官网教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>都有，当然是不可能一切顺利的</p> <h2 id="中英文教程的不同"><a href="#中英文教程的不同" class="header-anchor">#</a> 中英文教程的不同</h2> <p>（2022更新: 已经解决了）</p> <p><a href="https://developers.google.cn/ar/develop/unity/quickstart-android" target="_blank" rel="noopener noreferrer">官方网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上列的很全面，各个平台以及各个平台的入门指南都很详细，跟着一步一步来总没有问题吧。通过官网给出的步骤将ARCore包导入Unity。会注意到有一些报错。观察一下主要是SDK中的（即时预览）InstantPreview和Example中的云锚点（CloudAnchors）出现的问题。</p> <p><img src="/my-blog/assets/img/20200605155921633.4d61143f.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>根据博主<a href="https://blog.csdn.net/wq6ylg08/article/details/106016632" target="_blank" rel="noopener noreferrer">李同学<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>反馈的。Unity官网教程的中文页面没有更新，对比一下中英文页面就能发现问题。</p> <p><img src="/my-blog/assets/img/20200605160248526.2c57b39c.jpg" alt="20200605160248526"></p> <p><img src="/my-blog/assets/img/20200605160112888.3b37b245.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><img src="/my-blog/assets/img/20200605160112909.83dddf45.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>英文教程里面指出了在使用Unity2019时需要额外的包<strong>Multiplayer HLAPI</strong>和<strong>XR Legacy Input Helpers</strong>分别对应前面提到的<strong>云锚点</strong>和<strong>即时预览</strong></p> <p>根据英文教程的指引，去Window-&gt;Package Manageer下就能找到这两个需要的包。</p> <h2 id="adb路径问题"><a href="#adb路径问题" class="header-anchor">#</a> adb路径问题</h2> <p>挺坑的一点是，我在安装Unity的时候已经安装了额外的Android SDK，JDK和NDK Tools，然后在试着run一下的时候弹出。其实我这里run不run也没什么意义，因为既没连手机也没连虚拟设备。</p> <p><img src="/my-blog/assets/img/2020060516465652.5313e666.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><img src="/my-blog/assets/img/20200605161316535.0fc3333e.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>意思是没有Android SDK？顺着Editor-&gt;Preferences-&gt;External Tools往下拉可以看到SDK的路径里面已经有路径了（这里和JDK、NDK都是在UnityHub中安装的），那就去那个路径下面看看。</p> <p>D:/UnityHub/UnityEditor/2019.3.14f1/Editor/Data/PlaybackEngines/AndroidPlayer\SDK</p> <p>确实是有SDK的，但在build时报错就非常迷惑，这里也就是我梦的开始的地方。</p> <p><img src="/my-blog/assets/img/20200605161519900.50e1ffc8.png" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><strong>以为Unity安装的Android SDK没有用</strong>，于是我就去安装了Android Studio来自己安装Android SDK，绕了好大的弯路。实际上此时此刻我不需要理会这里，Unity安装的Android SDK是没有问题的。用Android Studio安装SDK步骤我会放在最后，如果感兴趣可以看看。</p> <p>在配置好adb，反复修改Android SDK的路径之后，run时候的报错信息变成了：</p> <blockquote><p>adb not found at &quot;C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe&quot;. Please verify that 'Preferences &gt; External Tools &gt; Android' has the correct Android SDK path that the Android Platform Tools are installed, and that &quot;C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe&quot; exists. You may need to install the Android SDK first.</p></blockquote> <p>根据报错信息来看，是没有配置adb环境。以至于在C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe这个路径下找不到adb.exe文件，但是奇怪的是我在Unity中根本找不到在哪设置过这个路径。</p> <p>去计算机环境变量path下添加D:/UnityHub/UnityEditor/2019.3.14f1/Editor/Data/PlaybackEngines/AndroidPlayer/SDK**/platform-tools**，在这个路径下可以发现<strong>abd.exe</strong>文件。cmd中执行一下adb命令：</p> <p><img src="/my-blog/assets/img/202006051705241.903cb260.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>已经配置成功了，但是在run的时候还是会报同样的错误，重启也没用，每次run的时候unity都会去C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe这个路径下找adb.exe</p> <blockquote><p>adb not found at &quot;C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe&quot;. Please verify that 'Preferences &gt; External Tools &gt; Android' has the correct Android SDK path that the Android Platform Tools are installed, and that &quot;C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe&quot; exists. You may need to install the Android SDK first.</p></blockquote> <p>去报错位置的的代码里看看，之前的报错是因为adbPath路径不存在，而现在是adbPath路径（C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe）存在，但是跟着这个路径去对应的文件夹下面没有adb.exe文件。</p> <div class="language- extra-class"><pre class="language-text"><code>     var adbPath = ShellHelper.GetAdbPath();
            if (adbPath == null)
            {
                Debug.LogError(
                    &quot;Instant Preview requires your Unity Android SDK path to be set. &quot; +
                    &quot;Please set it under 'Preferences &gt; External Tools &gt; Android'. &quot; +
                    &quot;You may need to install the Android SDK first.&quot;);
                yield break;
            }
            else if (!File.Exists(adbPath))
            {
                Debug.LogErrorFormat(
                    
                    &quot;adb not found at \&quot;{0}\&quot;. Please verify that 'Preferences &gt; External Tools &quot; +
                     &quot;&gt; Android' has the correct Android SDK path that the Android Platform Tools &quot; +
                    &quot;are installed, and that \&quot;{0}\&quot; exists. You may need to install the Android &quot; +
                    &quot;SDK first.&quot;, adbPath
                );
                yield break;
            }
</code></pre></div><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><strong>解决办法：我将unity安装的sdk复制到了该路径下，偷天换日，这时候External Tools下SDK的路径不论是默认的还是C:\Users\dell\AppData\Local\Android\sdk\platform-tools\adb.exe在Build时都不会报错</strong></p> <h2 id="android-tools-version-0-0-26-1-1"><a href="#android-tools-version-0-0-26-1-1" class="header-anchor">#</a> Android Tools version 0.0 &lt; 26.1.1</h2> <p>这是我在使用Android Studio安装的SDK时遇到的问题。</p> <p>配置完成了，build一下HelloAR来试一试。</p> <p>结果每次bulid都提示<strong>Android Tools version 0.0 &lt;26.1.1</strong>，三个选项：“升级SDK”，“使用本机上最高版本SDK”，“取消”。</p> <p><img src="/my-blog/assets/img/20200605175833152.f0b7fece.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>第一个选项会进入无限复读，过一会还是会弹出这个对话框，怀疑是没有权限或者是链接访问不了。</p> <p>第二个选项也无法继续执行</p> <p><img src="/my-blog/assets/img/20200605180011607.306c718a.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><img src="/my-blog/assets/img/20200605174535733.3c98c02b.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><strong>解决方法：更换成用Unity安装的SDK</strong></p> <p><a href="https://blog.csdn.net/a1051826842/article/details/88205638" target="_blank" rel="noopener noreferrer">今心木目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>在他博客中提到，现在的2019版本很方便，可以直接使用Unity自带的Android SDK，不需要再去额外安装SDK。</p> <p><img src="/my-blog/assets/img/2020060516441633.ffeae7c8.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>可以直接用Unity来安装SDK，再用Android Studio安装就绕远路了啊。<strong>如果在安装Unity时没有额外安装Android sdk可以在unity hub中添加。</strong></p> <p><img src="/my-blog/assets/img/20200605164021613.f9f277cf.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p><img src="/my-blog/assets/img/20200605164021645.8a249d27.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>国外有个老哥在Linux上遇到了相同的问题，<strong>unity无法识别Android SDK的版本号，只能识别出SDK Tools version 0.0</strong>，我不知道对他的意思是不是理解得正确，他把Androi Studio里所有的SDK都安装了一遍？？？？？</p> <p><img src="/my-blog/assets/img/20200605182357369.fd31952f.jpg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <h2 id="gradle的问题"><a href="#gradle的问题" class="header-anchor">#</a> Gradle的问题</h2> <p>但是在build项目时到了Building Gradle Project时就会出错：</p> <p><img src="/my-blog/assets/img/20200605164021615.0e1e0087.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>略了一眼这96个报错，大部分都是</p> <p>“Could not get”“Could not download”，都是去'https://jcenter.bintray.com这里去下载jar包失败，我尝试访问了一下，转圈半天都加载不出来。</p> <p>搜这个问题网上大多是针对Android Studio的解决方案</p> <p>Could not download protobuf-java.jar (com.google.protobuf:protobuf-java:3.4.0)</p> <p>看到网上有人（https://www.jianshu.com/p/d175bef9770c）说将https改为http，去将上面的链接改成http之后发现确实能加载出内容了，一阵狂喜，然后就被泼了冷水</p> <p><img src="/my-blog/assets/img/2020060518100313.c6a2c680.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>因为安全问题，从2020年1月起他们的网站只能通过https或者RestAPI（不了解）来进行访问。</p> <p>网上还有人（https://blog.csdn.net/qq_42461824/article/details/105301843）说可以替换为阿里云的镜像</p> <p>按照博主的说法，去unity-&gt;edit-&gt;preferences-&gt;gradle路径下，找到同一级目录的GradleTemplates（博主很严谨，提到不同版本都不一样，最好是所有的文件都看一下，主要是找到respositories，我的是在GradleTemplates文件下的），打开baseProjectTemplate文件中buildscript下的respositories，只需要添加**maven{ url 'http://maven.aliyun.com/nexus/content/repositories/central/'}**就行了。</p> <div class="language- extra-class"><pre class="language-text"><code>allprojects {
    buildscript {
        repositories {**ARTIFACTORYREPOSITORY**
            //添加
            maven{ url 'http://maven.aliyun.com/nexus/content/repositories/central/'}
            google()
            jcenter()
        }
        dependencies {
            // If you are changing the Android Gradle Plugin version, make sure it is compatible with the Gradle version preinstalled with Unity
            // See which Gradle version is preinstalled with Unity here https://docs.unity3d.com/Manual/android-gradle-overview.html
            // See official Gradle and Android Gradle Plugin compatibility table here https://developer.android.com/studio/releases/gradle-plugin#updating-gradle
            // To specify a custom Gradle version in Unity, go do &quot;Preferences &gt; External Tools&quot;, uncheck &quot;Gradle Installed with Unity (recommended)&quot; and specify a path to a custom Gradle version
            classpath 'com.android.tools.build:gradle:3.4.0'
            **BUILD_SCRIPT_DEPS**
        }
    }
    repositories {**ARTIFACTORYREPOSITORY**
        google()
        jcenter()
        flatDir {
            dirs &quot;${project(':unityLibrary').projectDir}/libs&quot;
        }
    }
}
task clean(type: Delete) {
    delete rootProject.buildDir
}
</code></pre></div><p>之后打包，打包完成后可以成功得到apk文件，但是控制台还是能看到一堆报错，这些报错的信息都是相同的：启动adb服务器失败。这里就是我用Android Studio又安装了一个版本的Android SDK造的孽了（捂脸</p> <div class="language- extra-class"><pre class="language-text"><code>CommandWithNoStdoutInvokationFailure: 
Unable to start ADB server. 
Please make sure the Android SDK is installed and is properly configured in the Editor. 
See the Console for more details.
</code></pre></div><p>cmd中使用指令</p> <p>netstat –aon|findstr “5037”查看是哪个进程占用了5037端口</p> <p><img src="/my-blog/assets/img/2020060518100340.ed0933d0.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>然后想着去任务管理器中看看是哪个进程，结果找不到pid=14732的进程，又不敢直接把它kill，用tasklist|findstr “14732”来看看这个进程对应的任务，结果发现是adb？？？</p> <p>难道是我之前用Android Studio安装的android sdk里面的adb？</p> <p><img src="/my-blog/assets/img/2020060518100361.fbb064f1.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>去任务管理器-&gt;后台进程，有一个adb.exe，打开文件所在位置，果不其然，是之前安装的android sdk。打开Android Studio，找到sdk manager，将安装的sdk的打勾取消掉</p> <p>会提示：</p> <p><img src="/my-blog/assets/img/2020060518100364.cb0ce3e1.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>好像没卸载干净，最后还是重启了一遍手动去目录下卸载的。</p> <p><img src="/my-blog/assets/img/20200605183212189.1af5eed4.png" alt="jpg"> HelloAR</p> <p>下一步就是研究ARCore怎么用了</p> <h2 id="使用android-studio安装android-sdk"><a href="#使用android-studio安装android-sdk" class="header-anchor">#</a> 使用Android Studio安装Android SDK</h2> <p><strong>现在的Unity2019版本已经可以直接安装Android SDK了，这里只是记录一下</strong></p> <p>安装Android Studio后，第一次启动会弹出</p> <p><strong>Unable to access Android SDK add-on list</strong></p> <p>无需惊慌，无需理会，点Cancel，之后顺着点Next</p> <p>记得记一下SDK和JDK的路径。</p> <p><img src="/my-blog/assets/img/20200605181628715.d7f62e5b.jpeg" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>cmd中输入android –h发现并没有任何</p> <p>安装完成后还要去配置环境变量</p> <p>在path下添加上面的SDK Folder地址</p> <p>C:\Users\dell\AppData\Local\Android\Sdk**\tools**</p> <p>在安装完Android SDK后，在环境变量中也配置完毕，Editor-&gt;Preferences-&gt;External Tools将SDK和JDK的勾取消掉，将上图中的JDK和SDK路径填入，在填SDK时还非常贴心，能直接帮你提示路径，（C:\Users\dell\AppData\Local\Android\sdk这个路径就是用Android Studio安装的SDK路径）</p> <p><img src="/my-blog/assets/img/20200605161949915.9288ad19.png" alt="jpg"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p> <p>想要安装其他版本的sdk，只需要打开Android Studio，File-&gt;Settings-&gt;System Settings-&gt;Android SDK打勾想要的版本-&gt;apply，不仅有SDK，SDK Tool等等也可以选择不同版本来下载。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my-blog/ComputerGraphics/0007.html" class="prev">
        OpenGL通过glRasterPos设置当前光栅坐标实现分屏效果
      </a></span> <span class="next"><a href="/my-blog/ComputerGraphics/0008.html">
        [踩坑记录]VS2017+大恒MER-131-210U3C相机
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/my-blog/assets/js/app.8719d32f.js" defer></script><script src="/my-blog/assets/js/2.fe61bd6b.js" defer></script><script src="/my-blog/assets/js/3.82c0e95c.js" defer></script>
  </body>
</html>
