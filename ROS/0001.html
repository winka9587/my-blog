<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ROS Day1 | winka9587&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Is anyone there?">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.66c04e2d.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.8719d32f.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.fe61bd6b.js" as="script"><link rel="preload" href="/my-blog/assets/js/38.8df975a8.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.96b7d755.js"><link rel="prefetch" href="/my-blog/assets/js/11.94221570.js"><link rel="prefetch" href="/my-blog/assets/js/12.cda01586.js"><link rel="prefetch" href="/my-blog/assets/js/13.be30332a.js"><link rel="prefetch" href="/my-blog/assets/js/14.3776679c.js"><link rel="prefetch" href="/my-blog/assets/js/15.1be49f13.js"><link rel="prefetch" href="/my-blog/assets/js/16.f19ac87a.js"><link rel="prefetch" href="/my-blog/assets/js/17.def0ab1f.js"><link rel="prefetch" href="/my-blog/assets/js/18.708e7573.js"><link rel="prefetch" href="/my-blog/assets/js/19.66596390.js"><link rel="prefetch" href="/my-blog/assets/js/20.3995b6ee.js"><link rel="prefetch" href="/my-blog/assets/js/21.1c7f65f7.js"><link rel="prefetch" href="/my-blog/assets/js/22.6664bb7c.js"><link rel="prefetch" href="/my-blog/assets/js/23.43617db7.js"><link rel="prefetch" href="/my-blog/assets/js/24.67d6fbed.js"><link rel="prefetch" href="/my-blog/assets/js/25.41d7c9b1.js"><link rel="prefetch" href="/my-blog/assets/js/26.f2a09d11.js"><link rel="prefetch" href="/my-blog/assets/js/27.0a80dbf8.js"><link rel="prefetch" href="/my-blog/assets/js/28.793261c3.js"><link rel="prefetch" href="/my-blog/assets/js/29.d7e6e503.js"><link rel="prefetch" href="/my-blog/assets/js/3.82c0e95c.js"><link rel="prefetch" href="/my-blog/assets/js/30.54d620af.js"><link rel="prefetch" href="/my-blog/assets/js/31.890c2d76.js"><link rel="prefetch" href="/my-blog/assets/js/32.78089df6.js"><link rel="prefetch" href="/my-blog/assets/js/33.df07fc4f.js"><link rel="prefetch" href="/my-blog/assets/js/34.faedcc52.js"><link rel="prefetch" href="/my-blog/assets/js/35.a6a32fa5.js"><link rel="prefetch" href="/my-blog/assets/js/36.b7734f20.js"><link rel="prefetch" href="/my-blog/assets/js/37.d2986868.js"><link rel="prefetch" href="/my-blog/assets/js/39.c07b108e.js"><link rel="prefetch" href="/my-blog/assets/js/4.96218e05.js"><link rel="prefetch" href="/my-blog/assets/js/40.09555f17.js"><link rel="prefetch" href="/my-blog/assets/js/41.3d998535.js"><link rel="prefetch" href="/my-blog/assets/js/42.0e3c99bf.js"><link rel="prefetch" href="/my-blog/assets/js/43.315f3388.js"><link rel="prefetch" href="/my-blog/assets/js/5.9e62da6c.js"><link rel="prefetch" href="/my-blog/assets/js/6.3d281fcb.js"><link rel="prefetch" href="/my-blog/assets/js/7.cc12d867.js"><link rel="prefetch" href="/my-blog/assets/js/8.f68e3932.js"><link rel="prefetch" href="/my-blog/assets/js/9.4fb889cc.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.66c04e2d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">winka9587's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="winka的Blog" class="dropdown-title"><span class="title">winka的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="winka的Blog" class="mobile-dropdown-title"><span class="title">winka的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/winka9587" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vikanill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="winka的Blog" class="dropdown-title"><span class="title">winka的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="winka的Blog" class="mobile-dropdown-title"><span class="title">winka的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/winka9587" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Vikanill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/my-blog/" class="sidebar-heading clickable router-link-active"><span>主页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/" aria-current="page" class="sidebar-link">README</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/Category-level/0001.html" class="sidebar-heading clickable"><span>类级别</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/Category-level/0001.html" class="sidebar-link">NOCS</a></li><li><a href="/my-blog/Category-level/0002.html" class="sidebar-link">SPD</a></li><li><a href="/my-blog/Category-level/0003.html" class="sidebar-link">关于normal</a></li><li><a href="/my-blog/Category-level/0004.html" class="sidebar-link">关于curvature</a></li><li><a href="/my-blog/Category-level/0005.html" class="sidebar-link">CAPTRA部分代码解读</a></li><li><a href="/my-blog/Category-level/0006.html" class="sidebar-link">about数据集</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/ComputerGraphics/" class="sidebar-heading clickable"><span>再见了,所有的图形学作业</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/ComputerGraphics/0002.html" class="sidebar-link">OpenGL使用Laplacian进行网格光顺</a></li><li><a href="/my-blog/ComputerGraphics/0003.html" class="sidebar-link">从Mat_中提取数据失败:Mat_与Mat的区别</a></li><li><a href="/my-blog/ComputerGraphics/0001.html" class="sidebar-link">[WebGL]点击改变面的贴图</a></li><li><a href="/my-blog/ComputerGraphics/0005.html" class="sidebar-link">OpenCV Error: Mat踩坑踩到死</a></li><li><a href="/my-blog/ComputerGraphics/0006.html" class="sidebar-link">Loop Subdivision与Modified Butterfly Subdivision</a></li><li><a href="/my-blog/ComputerGraphics/0007.html" class="sidebar-link">OpenGL通过glRasterPos设置当前光栅坐标实现分屏效果</a></li><li><a href="/my-blog/ComputerGraphics/0004.html" class="sidebar-link">[踩坑记录]ARCore for Unity2019</a></li><li><a href="/my-blog/ComputerGraphics/0008.html" class="sidebar-link">[踩坑记录]VS2017+大恒MER-131-210U3C相机</a></li><li><a href="/my-blog/ComputerGraphics/0009.html" class="sidebar-link">[unity]C#脚本调用外部exe</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/Web/" class="sidebar-heading clickable"><span>Web</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/Web/0001.html" class="sidebar-link">解决'express' 不是内部或外部命令，也不是可运行的程序 或批处理文件</a></li><li><a href="/my-blog/Web/0002.html" class="sidebar-link">关于更新node.js以及npm</a></li><li><a href="/my-blog/Web/0003.html" class="sidebar-link">配置turn服务器实现nat穿透</a></li><li><a href="/my-blog/Web/0004.html" class="sidebar-link">web上的mediarecorder更换stream(录制过程中切换摄像头)</a></li><li><a href="/my-blog/Web/0005.html" class="sidebar-link">通过mediarecorder+mediasource实现h5直播,以及关于webrtc直播的问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/MachineLearning/" class="sidebar-heading clickable"><span>机器不学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/MachineLearning/0001.html" class="sidebar-link">基于SVM的划线框识别(1)HOG特征提取</a></li><li><a href="/my-blog/MachineLearning/0002.html" class="sidebar-link">基于SVM的划线框识别(2)ROC曲线(二分类)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/my-blog/ROS/" class="sidebar-heading clickable router-link-active open"><span>ROS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/ROS/0001.html" aria-current="page" class="active sidebar-link">ROS Day1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/ROS/0001.html#有一个疑问" class="sidebar-link">有一个疑问</a></li><li class="sidebar-sub-header"><a href="/my-blog/ROS/0001.html#bug" class="sidebar-link">bug</a></li><li class="sidebar-sub-header"><a href="/my-blog/ROS/0001.html#顺带一提" class="sidebar-link">顺带一提</a></li><li class="sidebar-sub-header"><a href="/my-blog/ROS/0001.html#no-module-named-typing" class="sidebar-link">No module named typing</a></li><li class="sidebar-sub-header"><a href="/my-blog/ROS/0001.html#后面还会遇到" class="sidebar-link">后面还会遇到</a></li></ul></li><li><a href="/my-blog/ROS/0002.html" class="sidebar-link">ROS Day2</a></li><li><a href="/my-blog/ROS/0003.html" class="sidebar-link">ROS Day3</a></li><li><a href="/my-blog/ROS/0004.html" class="sidebar-link">ROS Day4</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/my-blog/GoLearning/" class="sidebar-heading clickable"><span>天天想学习</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/my-blog/NoLearning/" class="sidebar-link">天天不想学习</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ros-day1"><a href="#ros-day1" class="header-anchor">#</a> ROS Day1</h1> <p>参考自ROS Wiki</p> <p>在UnderstandingTopics这一章遇到了问题，wiki中为了使用动态图显示系统中正在发生的事情，运行rqt_graph，然而我在运行命令</p> <div class="language- extra-class"><pre><code>rosrun rqt_graph rqt_graph 
</code></pre></div><p>时报错</p> <p>先是没有rospkg，这个在Anaconda目录下的“apt-get 和conda install将包安装到哪去了“中提过了。后来又遇到No module named catkin_pkg.packages
查到一篇博客说：</p> <div class="language- extra-class"><pre><code>Make sure that you have installed &quot; catkin_pkg &quot; , it is up to date and on the PYTHONPATH.
</code></pre></div><p>于是我用</p> <div class="language- extra-class"><pre><code>rospack find catkin_pkg
</code></pre></div><p>没找到，想了一下是在import时报错，所以catkin_pkg应该是个python的模块，于是pip install catkin_pkg，安装成功。
但是结合前面提到的“apt-get 和conda install将包安装到哪去了“，使用pip和conda install效果是一样的，我再次运行pip install catkin_pkg，
提示已经安装：catkin_pkg in ./anaconda3/lib/python3.8/site-packages(0.4.23)</p> <h2 id="有一个疑问"><a href="#有一个疑问" class="header-anchor">#</a> 有一个疑问</h2> <p>结合之前那篇文章中的内容，有一个疑问， 假如我在anaconda下create了3个环境，第一个是python2.7的，叫py27；
第二个和第三个都是python3.8的分别叫py38和test，假设我在py38下使用pip install安装了包，那么test下是否能找到这个包？</p> <div class="language- extra-class"><pre><code>catkin_pkg in ./anaconda3/lib/python3.8/site-packages(0.4.23)
</code></pre></div><p>并没有对py38和test进行区分，是否在import时会有差异呢？</p> <p>pip应当是对应虚拟环境的python版本，之所以会出现上面的问题是因为下面的bug，当解决了这个bug后，可以通过 which pip 命令查看使用的是哪个虚拟环境下的pip</p> <h2 id="bug"><a href="#bug" class="header-anchor">#</a> bug</h2> <p>遇到了新的问题，使用conda create 创建新的环境后，例如</p> <div class="language- extra-class"><pre><code>conda create -n py27 python=2.7
</code></pre></div><p>成功执行了，而且输出的结果也显示</p> <div class="language- extra-class"><pre><code>The Following NEW packages will be INSTALLED:
…
python pkgs/main/linux-64/python-2.7.18-ha1903f6_2
…
</code></pre></div><p>结果使用 python --version 发现版本还是3.8.8</p> <p>解决方案：</p> <p>使用命令
conda deactivate
退出base环境，然后重新激活环境
conda activate env_name</p> <p>参考https://stackoverflow.com/questions/36733179/why-conda-cannot-call-correct-python-version-after-activating-the-environment</p> <h2 id="顺带一提"><a href="#顺带一提" class="header-anchor">#</a> 顺带一提</h2> <p>我在pip时使用的是py27，环境是python2.7。但是第二次pip显示已安装的路径是python3.8的。catkin_pkg in ./anaconda3/lib/python3.8/site-packages(0.4.23)，通过pip -V可以看到pip的版本以及它来自哪个python版本。</p> <p>如何切换pip？假设我当前使用python2.7的环境py27，我想用pip安装应该怎么做</p> <p>网上说可以修改site.py文件下的USER_SITE和USER_BASE分别来修改下载的package存放路径和python，pip等模块的存放地址。</p> <hr> <p>文章里也说了，PYTHONPATH是python解释器搜索包的路径，也就是说需要确保包的路径在环境变量PYTHONPATH中才行。而我执行echo $PYTHONPATH发现返回结果是
/opt/ros/kinetic/lib/python2.7/dist-packages</p> <p>在之前那篇文章中也有过向环境变量添加路径的操作，但是那次是apt-get下载的模块，而且下载的也是python2.7的模块，所以现在得解决python2.7使用pip的问题</p> <h2 id="no-module-named-typing"><a href="#no-module-named-typing" class="header-anchor">#</a> No module named typing</h2> <p>https://stackoverflow.com/questions/67278017/pip-command-line-importerror-no-module-named-typing</p> <p>解决方法</p> <div class="language- extra-class"><pre><code>wget  https://bootstrap.pypa.io/pip/2.7/get-pip.py

python get-pip.py
</code></pre></div><p>相当于重新安装了python2.7的pip，再使用</p> <div class="language- extra-class"><pre><code>pip install typing
</code></pre></div><p>即可</p> <h2 id="后面还会遇到"><a href="#后面还会遇到" class="header-anchor">#</a> 后面还会遇到</h2> <div class="language- extra-class"><pre><code>No module named catkin_pkg.packages
pip install catkin_pkg
No module named PySide2.QtCore
pip install PySide2
Qt.qpa.plugin:Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized.Reinstalling the application may fix this problem.
sudo apt-get install libxcb-xinerama0
</code></pre></div><p>当运行 rosrun rqt_graph rqt_graph 时</p> <div class="language- extra-class"><pre><code>PluginManager._discover() force discovery of plugins
RospkgPluginProvider._find_plugins() crawling for plugins of type 'qt_gui'
Segmentation fault(core dumped)
</code></pre></div><p>参考: https://answers.ros.org/question/260316/rqt-rqt_graph-rqt_plot-doest-work-segmentation-fault-core-dumped/</p> <div class="language- extra-class"><pre><code>I had the same problem. When I checked the Ubuntu crash report I realized that the error was coming from Qt library. I had a software package which was referencing QT libs from a different path. Once I setup the environment variable LD_LIBRARY_PATH=&lt;qt home=&quot;&quot; directory=&quot;&quot;&gt;/5.7/gcc_64/lib I was able to run rqt without segfault. Hope this helps.
</code></pre></div><p>提到的环境变量LD_LIBRARY_PATH，似乎是没有安装Qt库的问题</p> <p>使用命令 qmake -v 查看Qt版本，显示:</p> <div class="language- extra-class"><pre><code>Qmake version 3.1
Using Qt version 5.9.7 in /home/winka/anaconda3/lib
</code></pre></div><p>看来是之前已经安装了Qt</p> <div class="language- extra-class"><pre><code>echo $LD_LIBRARY_PATH
/opt/ros/kinetic/lib:/opt/kenetic/lib/x86_64-linux-gnu
</code></pre></div><p>并没有这个路径</p> <p>那么现在要将Qt的路径添加到LD_LIBRARY_PATH下</p> <p>执行命令</p> <div class="language- extra-class"><pre><code>export LD_LIBRARY_PATH=/home/winka/anaconda3/lib:$LD_LIBRARY_PATH
</code></pre></div><p>注意等号前后不要加空格！！</p> <p>直接运行命令 ros_graph即可出现图形界面</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my-blog/MachineLearning/0002.html" class="prev">
        基于SVM的划线框识别(2)ROC曲线(二分类)
      </a></span> <span class="next"><a href="/my-blog/ROS/0002.html">
        ROS Day2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/my-blog/assets/js/app.8719d32f.js" defer></script><script src="/my-blog/assets/js/2.fe61bd6b.js" defer></script><script src="/my-blog/assets/js/38.8df975a8.js" defer></script>
  </body>
</html>
